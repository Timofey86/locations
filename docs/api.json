{
  "openapi": "3.0.0",
  "info": {
    "title": "API Locations Documentation",
    "description": "Locations directory",
    "version": "1.0.0"
  },
  "paths": {
    "/auth/login": {
      "post": {
        "summary": "Login user",
        "description": "Authenticate a user and return a JWT token",
        "tags": [
          "auth"
        ],
        "operationId": "loginUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "User email"
                  },
                  "password": {
                    "type": "string",
                    "description": "User password"
                  }
                },
                "required": ["email", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "JWT token generated",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "description": "JWT token for authentication"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      }
    },
    "/users": {
      "post": {
        "summary": "Register user",
        "description": "Register user",
        "tags": [
          "user"
        ],
        "operationId": "postUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        },
        "responses": {
          "201": {
            "$ref": "#/components/responses/Created"
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      }
    },
    "/macro-regions": {
      "get": {
        "summary": "Macroregions items",
        "description": "Get macroregions items",
        "tags": [
          "macroRegion"
        ],
        "operationId": "indexMacroRegion",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "part of the name used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "code",
            "in": "query",
            "description": "part of the code used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of macroregions with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/MacroRegion"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  },
                  "required": ["items", "pagination"]
                }
              }
            }
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      },
      "post": {
        "summary": "Upsert Macroregion",
        "description": "Insert or Update Macroregion",
        "tags": [
          "macroRegion"
        ],
        "operationId": "postMacroRegion",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MacroRegion"
              }
            }
          }
        },
        "responses": {
          "200": {
            "$ref": "#/components/responses/OK"
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      }
    },
    "/macro-regions/{id}": {
      "get": {
        "summary": "Get Macroregion",
        "description": "Get Macroregion by Id",
        "tags": [
          "macroRegion"
        ],
        "operationId": "getMacroRegion",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Id Macroregion",
            "schema": {
              "type": "string",
              "format": "UUID",
              "example": "5aa49c2e-bd51-4529-b70f-8df84114060f"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Macroregion",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "item": {
                      "$ref": "#/components/schemas/MacroRegion"
                    }
                  },
                  "required": ["item"]
                }
              }
            }
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "404" : {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/macro-regions/list": {
      "get": {
        "summary": "Macroregions list",
        "description": "Get macroregions list",
        "tags": [
          "macroRegion"
        ],
        "operationId": "getMacroRegionList",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "part of the name used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/List"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      }
    },
    "/countries" : {
      "get" : {
        "summary": "Countries items",
        "description": "Get all countries",
        "tags": [
          "countries"
        ],
        "operationId": "indexCountry",
        "parameters": [
          {
            "name": "name",
            "in": "path",
            "description": "part of the name used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "iso",
            "in": "path",
            "description": "part of the iso used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "capital",
            "in": "path",
            "description": "part of the capital used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "phoneCode",
            "in": "path",
            "description": "part of the phoneCode used for filtering",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of countries with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Country"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  },
                  "required": ["items", "pagination"]
                }
              }
            }
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      },
      "post": {
        "summary": "Upsert Country",
        "description": "Insert or Update Country",
        "tags": [
          "country"
        ],
        "operationId": "postCountry",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Country"
              }
            }
          }
        },
        "responses": {
          "200": {
            "$ref": "#/components/responses/OK"
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      }
    },
    "/countries/{id}": {
      "get": {
        "summary": "Get Country",
        "description": "Get Country by Id",
        "tags": [
          "country"
        ],
        "operationId": "getCountry",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Id Country",
            "schema": {
              "type": "string",
              "format": "UUID",
              "example": "d4d27b6c-2da2-4a4b-aec5-79825d6d9094"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Country",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "item": {
                      "$ref": "#/components/schemas/Country"
                    }
                  },
                  "required": ["item"]
                }
              }
            }
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "404" : {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "delete": {
        "summary": "Delete country",
        "description": "Delete country by id",
        "tags": [
          "country"
        ],
        "operationId": "deleteCountry",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Id country",
            "schema": {
              "type": "string",
              "format": "UUID",
              "example": "66cbfffc-e249-41da-b87e-7b571ada1938"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/OK"
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/countries/list": {
      "get": {
        "summary": "Countries list",
        "description": "Get countries list",
        "tags": [
          "country"
        ],
        "operationId": "getCountryList",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "part of the name used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of countries with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ListItem"
                      }
                    }
                  },
                  "required": ["items"]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          }
        }
      }
    },
    "/regions": {
      "get" : {
        "summary": "Regions items",
        "description": "Get all regions",
        "tags": [
          "region"
        ],
        "operationId": "indexRegion",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "part of the name used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "countryId",
            "in": "query",
            "description": "ID country",
            "required": false,
            "schema": {
              "type": "string",
              "format": "UUID",
              "example": "22a2e2a2-7e24-4414-9b58-dec997ee16dc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of regions with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Region"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  },
                  "required": ["items", "pagination"]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      },
      "post": {
        "summary": "Upsert Region",
        "description": "Insert or Update Region",
        "tags": [
          "region"
        ],
        "operationId": "postRegion",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Region"
              }
            }
          }
        },
        "responses": {
          "200": {
            "$ref": "#/components/responses/OK"
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "422": {
            "$ref": "#/components/responses/UnprocessableEntity"
          }
        }
      }
    },
    "/regions/{id}": {
      "get": {
        "summary": "Get region",
        "description": "Get Region by Id",
        "tags": [
          "region"
        ],
        "operationId": "getRegion",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Id Region",
            "schema": {
              "type": "string",
              "format": "UUID",
              "example": "d4d27b6c-2da2-4a4b-aec5-79825d6d9094"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Region",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "item": {
                      "$ref": "#/components/schemas/Region"
                    }
                  },
                  "required": ["item"]
                }
              }
            }
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "404" : {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "delete": {
        "summary": "Delete region",
        "description": "Delete region by id",
        "tags": [
          "region"
        ],
        "operationId": "deleteRegion",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Id region",
            "schema": {
              "type": "string",
              "format": "UUID",
              "example": "d5c9c51a-e05d-47c2-81cb-788ecef4666b"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/OK"
          },
          "401" : {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/regions/list": {
      "get": {
        "summary": "Countries list",
        "description": "Get countries list",
        "tags": [
          "country"
        ],
        "operationId": "getCountryList",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "part of the name used for filtering",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of regions with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "items": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ListItem"
                      }
                    }
                  },
                  "required": ["items"]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/AccessDenied"
          }
        }
      }
    }
  },
  "security": [
    {
      "Bearer": []
    }
  ],
  "components": {
    "schemas": {
      "FormFieldErrors": {
        "type": "array",
        "items": {
          "type": "string",
          "example": "Human-readable error description with a dot."
        }
      },
      "User": {
        "properties": {
          "email": {
            "type": "string",
            "description": "User email"
          },
          "password": {
            "type": "string",
            "description": "User password"
          },
          "roles": {
            "type": "array",
            "items": { "type": "string" },
            "description": "User roles"
          }
        },
        "type": "object",
        "required": [
          "email", "password", "roles"
        ]
      },
      "MacroRegion": {
        "properties": {
          "id": {
            "type": "string",
            "format": "UUID",
            "example": "29475583-ca40-4201-a6fb-04efd0ab4c69"
          },
          "code": {
            "type": "string",
            "example": "EU",
            "description": "Code Macro Region"
          },
          "name": {
            "type": "string",
            "example": "Europe",
            "description": "Name Macro Region"
          },
          "sorting": {
            "type": "integer",
            "example": 100,
            "description": "Sorting position",
            "nullable": true
          },
          "geonameId": {
            "type": "integer",
            "example": 6255148,
            "description": "Id from resource",
            "nullable": true
          }
        },
        "type": "object",
        "required": [
          "name", "code"
        ]
      },
      "Country": {
        "properties": {
          "id": {
            "type": "string",
            "format": "UUID",
            "example": "89ecf469-9feb-47b1-89fa-e694a37bff00"
          },
          "name" : {
            "type": "string",
            "example": "Russia",
            "description": "Country name"
          },
          "iso": {
            "type": "string",
            "example": "RU",
            "description": "Iso country code"
          },
          "capital": {
            "type": "string",
            "example": "Moscow",
            "description": "Capital of country"
          },
          "population": {
            "type": "integer",
            "example": 1000000,
            "description": "Population of country"
          },
          "phoneCode": {
            "type": "integer",
            "example": 7,
            "description": "phone code country"
          },
          "macroRegionId": {
            "type": "string",
            "example": "f9546662-6ecc-4c78-bf96-8876ccf846e8",
            "description": "Macroregion country"
          },
          "sorting": {
            "type": "integer",
            "example": 100,
            "description": "Sorting position",
            "nullable": true
          },
          "geonameId": {
            "type": "integer",
            "example": 1222456,
            "description": "Id from resource",
            "nullable": true
          }
        },
        "type": "object",
        "required": [
          "iso", "name", "capital", "population", "phoneCode", "macroRegionId"
        ]
      },
      "CountryWithMacroRegion": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Country"
          },
          {
            "type": "object",
            "properties": {
              "macroRegion": {
                "type": "object",
                "required": ["id", "name"],
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "UUID"
                  },
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        ]
      },
      "Region": {
        "properties": {
          "id": {
            "type": "string",
            "format": "UUID",
            "example": "89ecf469-9feb-47b1-89fa-e694a37bff00"
          },
          "name": {
            "type": "string",
            "example": "Bayern"
          },
          "code": {
            "type": "string",
            "example": "AE.02"
          },
          "countryId": {
            "type": "string",
            "example": "22a2e2a2-7e24-4414-9b58-dec997ee16dc",
            "description": "Region country"
          },
          "sorting": {
            "type": "integer",
            "example": 100,
            "description": "Sorting position",
            "nullable": true
          },
          "geonameId": {
            "type": "integer",
            "example": 6255148,
            "description": "Id from resource",
            "nullable": true
          }
        },
        "type": "object",
        "required": ["name", "code", "countryId"]
      },
      "RegionWithCountry": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Region"
          },
          {
            "type": "object",
            "properties": {
              "country": {
                "type": "object",
                "required": ["id", "name"],
                "properties": {
                  "id": {
                    "type": "string",
                    "format": "UUID"
                  },
                  "name": {
                    "type": "string"
                  }
                }
              }
            }
          }
        ]
      },
      "ListItem": {
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        },
        "type": "object",
        "required": ["id", "name"]
      },
      "Pagination": {
        "properties": {
          "page": {
            "type": "integer",
            "example": 1
          },
          "totalItems": {
            "type": "integer",
            "example": 3
          },
          "totalPages": {
            "type": "integer",
            "example": 2
          },
          "itemsPerPage": {
            "type": "integer",
            "example": 3
          }
        },
        "required": [
          "page",
          "totalItems",
          "totalPages",
          "itemsPerPage"
        ],
        "type": "object"
      }
    },
    "responses": {
      "OK": {
        "description": "OK"
      },
      "List": {
        "description": "List of items",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "items": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ListItem"
                  }
                }
              }
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Access token is invalid",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": ["message", "code"],
              "additionalProperties": false,
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Invalid Bearer token."
                },
                "code": {
                  "type": "integer",
                  "example": 401
                }
              }
            }
          }
        }
      },
      "AccessDenied": {
        "description": "Access token is invalid",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": [
                "message"
              ],
              "additionalProperties": false,
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Invalid Bearer token."
                }
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
          }
        }
      },
      "Created": {
        "description": "Created",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": [
                "id"
              ],
              "additionalProperties": false,
              "properties": {
                "id": {
                  "type": "string",
                  "format": "UUID",
                  "example": "206de425-3298-4dab-b4c9-1e19bfae9ea6"
                }
              }
            }
          }
        }
      },
      "BadRequest": {
        "description": "Bad request, e.g., missing required fields or invalid data",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": ["message"],
              "additionalProperties": false,
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Validation failed: email is required."
                }
              }
            }
          }
        }
      },
      "UnprocessableEntity": {
        "description": "Unprocessable entity",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": [
                "errors"
              ],
              "additionalProperties": false,
              "properties": {
                "errors": {
                  "additionalProperties": {
                    "$ref": "#/components/schemas/FormFieldErrors"
                  }
                }
              }
            }
          }
        }
      },
      "Conflict": {
        "description": "Conflict",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": [
                "message"
              ],
              "additionalProperties": false,
              "properties": {
                "message": {
                  "type": "string",
                  "example": "Conflict"
                }
              }
            }
          }
        }
      },
      "MacroRegionItem": {
        "description": "OK",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "format": "UUID",
                  "example": "adaf32eb-4c57-4137-8ec3-09f336ef1e6a"
                },
                "name": {
                  "type": "string",
                  "example": "Europe"
                },
                "code": {
                  "type": "string",
                  "example": "EU"
                },
                "sorting": {
                  "type": "integer",
                  "example": 100,
                  "nullable": true
                },
                "geonameId" : {
                  "type": "integer",
                  "example": 6255148,
                  "nullable": true
                }
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "Bearer": {
        "type": "apiKey",
        "name": "Bearer",
        "in": "header",
        "description": "Enter token with prefix `Bearer: `, example: \"Bearer: abcde12345\""
      }
    }
  }
}
